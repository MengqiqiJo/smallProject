{
  "version": 3,
  "file": "ngx-echarts.directive.js",
  "sources": [
    "ng://ngx-echarts/projects/ngx-echarts/src/lib/ngx-echarts.directive.ts"
  ],
  "sourcesContent": [
    "import {\r\n  Directive, ElementRef, Renderer, Input, Output, HostListener, EventEmitter,\r\n  OnChanges, OnDestroy, SimpleChanges, NgZone, DoCheck\r\n} from '@angular/core';\r\nimport { ChangeFilter } from './change-filter';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { debounceTime } from 'rxjs/operators';\r\n\r\ndeclare var echarts: any;\r\n\r\n@Directive({\r\n  selector: 'echarts, [echarts]'\r\n})\r\nexport class NgxEchartsDirective implements OnChanges, OnDestroy, DoCheck {\r\n  @Input() options: any;\r\n  @Input() theme: string;\r\n  @Input() loading: boolean;\r\n  @Input() initOpts: any;\r\n  @Input() merge: any;\r\n  @Input() autoResize = true;\r\n  @Input() loadingType = 'default';\r\n  @Input() loadingOpts: any;\r\n\r\n  // chart events:\r\n  @Output() chartInit = new EventEmitter<any>();\r\n  @Output() chartClick = new EventEmitter<any>();\r\n  @Output() chartDblClick = new EventEmitter<any>();\r\n  @Output() chartMouseDown = new EventEmitter<any>();\r\n  @Output() chartMouseUp = new EventEmitter<any>();\r\n  @Output() chartMouseOver = new EventEmitter<any>();\r\n  @Output() chartMouseOut = new EventEmitter<any>();\r\n  @Output() chartGlobalOut = new EventEmitter<any>();\r\n  @Output() chartContextMenu = new EventEmitter<any>();\r\n  @Output() chartDataZoom = new EventEmitter<any>();\r\n\r\n  private _chart: any = null;\r\n  private currentOffsetWidth = 0;\r\n  private currentOffsetHeight = 0;\r\n  private currentWindowWidth: any = null;\r\n  private _resize$ = new Subject<any>();\r\n  private _resizeSub: Subscription;\r\n\r\n  constructor(private el: ElementRef, private _ngZone: NgZone) { }\r\n\r\n  private createChart() {\r\n    this.currentWindowWidth = window.innerWidth;\r\n    this.currentOffsetWidth = this.el.nativeElement.offsetWidth;\r\n    this.currentOffsetHeight = this.el.nativeElement.offsetHeight;\r\n    const dom = this.el.nativeElement;\r\n\r\n    if (window && window.getComputedStyle) {\r\n      const prop = window.getComputedStyle(dom, null).getPropertyValue('height');\r\n      if ((!prop || prop === '0px') &&\r\n        (!dom.style.height || dom.style.height === '0px')) {\r\n        dom.style.height = '400px';\r\n      }\r\n    }\r\n\r\n    return this._ngZone.runOutsideAngular(() => echarts.init(dom, this.theme || undefined, this.initOpts || undefined));\r\n  }\r\n\r\n  @HostListener('window:resize', ['$event'])\r\n  onWindowResize(event: any) {\r\n    if (this.autoResize && event.target.innerWidth !== this.currentWindowWidth) {\r\n      this.currentWindowWidth = event.target.innerWidth;\r\n      this.currentOffsetWidth = this.el.nativeElement.offsetWidth;\r\n      this.currentOffsetHeight = this.el.nativeElement.offsetHeight;\r\n\r\n      this._resize$.next();\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const filter = ChangeFilter.of(changes);\r\n    filter.notEmpty<any>('options').subscribe(opt => this.onOptionsChange(opt));\r\n    filter.notEmpty<any>('merge').subscribe(opt => this.setOption(opt));\r\n    filter.has<boolean>('loading').subscribe(v => this.toggleLoading(!!v));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this._resizeSub) {\r\n      this._resizeSub.unsubscribe();\r\n      this._resizeSub = null;\r\n    }\r\n\r\n    if (this._chart) {\r\n      this._chart.dispose();\r\n      this._chart = null;\r\n    }\r\n  }\r\n\r\n  ngDoCheck() {\r\n    // No heavy work in DoCheck!\r\n    if (this._chart && this.autoResize) {\r\n      const offsetWidth = this.el.nativeElement.offsetWidth;\r\n      const offsetHeight = this.el.nativeElement.offsetHeight;\r\n\r\n      if (this.currentOffsetWidth !== offsetWidth || this.currentOffsetHeight !== offsetHeight) {\r\n        this.currentOffsetWidth = offsetWidth;\r\n        this.currentOffsetHeight = offsetHeight;\r\n        this._resize$.next();\r\n      }\r\n    }\r\n  }\r\n\r\n  private onOptionsChange(opt: any) {\r\n    if (opt) {\r\n      if (!this._chart) {\r\n        this._chart = this.createChart();\r\n\r\n        // subscribe to _resize$ and debounced\r\n        this._resizeSub = this._resize$.pipe(debounceTime(50)).subscribe(() => {\r\n          if (this._chart) {\r\n            this._chart.resize();\r\n          }\r\n        });\r\n\r\n        // output echart instance:\r\n        this.chartInit.emit(this._chart);\r\n\r\n        // register events:\r\n        this.registerEvents(this._chart);\r\n      }\r\n\r\n      this._chart.setOption(this.options, true);\r\n\r\n      /**\r\n       * Bugfix: Line chart is not animated on init\r\n       * https://github.com/xieziyu/ngx-echarts/issues/102\r\n       */\r\n      // this._chart.resize();\r\n    }\r\n  }\r\n\r\n  private registerEvents(_chart: any) {\r\n    if (_chart) {\r\n      // register mouse events:\r\n      _chart.on('click', e => this._ngZone.run(() => this.chartClick.emit(e)));\r\n      _chart.on('dblClick', e => this._ngZone.run(() => this.chartDblClick.emit(e)));\r\n      _chart.on('mousedown', e => this._ngZone.run(() => this.chartMouseDown.emit(e)));\r\n      _chart.on('mouseup', e => this._ngZone.run(() => this.chartMouseUp.emit(e)));\r\n      _chart.on('mouseover', e => this._ngZone.run(() => this.chartMouseOver.emit(e)));\r\n      _chart.on('mouseout', e => this._ngZone.run(() => this.chartMouseOut.emit(e)));\r\n      _chart.on('globalout', e => this._ngZone.run(() => this.chartGlobalOut.emit(e)));\r\n      _chart.on('contextmenu', e => this._ngZone.run(() => this.chartContextMenu.emit(e)));\r\n      // other events;\r\n      _chart.on('datazoom', e => this._ngZone.run(() => this.chartDataZoom.emit(e)));\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    if (this._chart) {\r\n      this._chart.clear();\r\n    }\r\n  }\r\n\r\n  toggleLoading(loading: boolean) {\r\n    if (this._chart) {\r\n      loading ? this._chart.showLoading(this.loadingType, this.loadingOpts) : this._chart.hideLoading();\r\n    }\r\n  }\r\n\r\n  setOption(option: any, opts?: any) {\r\n    if (this._chart) {\r\n      this._chart.setOption(option, opts);\r\n    }\r\n  }\r\n}\r\n"
  ],
  "names": [],
  "mappings": "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"
}
